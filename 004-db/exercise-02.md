# Задание 2. Работа с базой данных 

## Техническое задание
Благодаря инструкции по настройке SQLite в PHPStorm мы можем потренироваться в работе с созданием таблиц и различных действий
с ними.

В качестве результата необходимо прислать подготовленные SQL запросы.

В данном задании вам надо подготовить SQL запросы, которые будут делать следующее:
* создать несколько таблиц:
    * таблица магазина shop,
    * таблица продуктов product,
    * таблица заказа order,
    * таблица соответствий продуктов и заказов (order_product),
    * таблица покупателя client.

Не забудьте про следующие важные свойства:
* название (name), адрес (address) для магазина,
* название (name),  цена (price) и количество штук (count) для продуктов,
* дата и время создания заказа (created_at), кто кому продал - заказ,
* какие продукты вошли в какой заказ и с какой ценой - соответствие заказов и продуктов,
* номер телефона (phone) и имя (name) для клиентов.

Также необходимо заполнить SQL запросами таблицы данными, как минимум по 5 строк в каждой таблицы.
Замечание: не для каждого магазина могут существовать продукты и заказы, но каждый продукт и заказ привязаны к магазину.

## Дополнительное задание со звездочкой.
Помимо базовых запросов вам необходимо изучить и такое понятие, как агрегатные функции:

* [Агрегатные функции](https://codetown.ru/sql/agregatnye-funkcii/)

### Задание:

Подготовьте SQL запросы для следующих задач:
1) Вывести для каждого клиента сумму его покупок, сделанных в период +- 3 дня от его дня рождения.
2) Вывести заказы, в которых цена продукта отличается от нынешней в таблице, а также вывести разницу в сумме.
3) Найти самый прибыльный магазин и магазин, в котором произвели больше всего покупок.
 
**Обратите внимание на** [**рекомендации по сдаче домашнего задания**](../homework.md). 
